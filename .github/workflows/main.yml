name: CI/CD
on: [pull_request, push]

jobs:

  build_and_deploy:
    name: Build and Deploy
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: actions/checkout@v1
    - uses: actions/setup-java@v1
      with:
        java-version: '12.x'
    - uses: subosito/flutter-action@v1
      with:
          channel: 'beta'
    - run: flutter pub get
    
    - name: Sending notification
          run |
            if [[ true ]];  then
              curl -X POST -H "X-ChatWorkToken: 9fd8ba9fc90153fa9affec49f3d2b8cf" -d \
                "body=
                - Repository name: ABC
                - Author: ABC
                - Branch: ABC
                - Commit/pull request link: https://github.com
                - Build link: ABC
                " \
                "https://api.chatwork.com/v2/rooms/193066762/messages"
            fi
